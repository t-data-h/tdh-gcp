---
- hosts: all
  vars:
    tdh_dist_path: '~/tmp/dist/'
    tdh_drop_path: '/tmp/TDH'
  tasks:
  - name: TDH source
    stat:
      path: '{{ tdh_dist_path }}/TDH.tar.gz'
    register: tdhdiststat
  - name: TDH Config source
    stat:
      path: '{{ tdh_dist_path }}/tdh-conf.tar.gz'
    register: tdhconfstat
  - name: TDH Python source
    stat:
      path: '{{ tdh_dist_path }}/tdh-anaconda3.tar.gz'
    register: tdhpystat
  - name: Create drop path if needed
    become: true
    file:
      path: '{{ tdh_drop_path }}'
      state: directory
      mode: 0777
  - name: Copy TDH package to dropzone
    copy:
      src: '{{ tdh_dist_path }}//TDH.tar.gz'
      dest: '{{ tdh_drop_path }}/'
    when: tdhdiststat.stat.exists
  - name: Copy Config packageto dropzone
    copy:
      src: '{{ tdh_dist_path }}//tdh-conf.tar.gz'
      dest: '{{ tdh_drop_path }}/'
    when: tdhconfstat.stat.exists
  - name: Copy Python package to dropzone
    copy:
      src: '{{ tdh_dist_path }}//tdh-conf.tar.gz'
      dest: '{{ tdh_drop_path }}/'
    when: tdhpystat.stat.exists
